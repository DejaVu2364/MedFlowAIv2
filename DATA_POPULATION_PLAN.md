# Data Population Plan: 77 Synthea Patients for AI Testing

## üéØ Objective
Populate the MedFlow database with **77 realistic, synthetic patients** generated by Synthea‚Ñ¢.
**Goal:** Stress-test the AI modules (Triage, MedView, Search) with complex, longitudinal clinical data.

## 1. Data Source: Synthea‚Ñ¢
We will use a pre-generated FHIR R4 dataset or generate a custom one.
*   **Target Count:** 77 Patients.
*   **Format:** HL7 FHIR R4 (JSON).
*   **Diversity:** Mix of healthy, chronic (Diabetes, HTN), and acute (COVID, Injuries) cases.

## 2. Implementation Strategy

### Phase 1: Data Acquisition
1.  **Download:** Get the "1K Sample Synthetic Patient Records" from [Synthea Downloads](https://synthea.mitre.org/downloads).
2.  **Filter:** Write a script to select exactly **77 diverse patients** from this set.
    *   *Why 77?* Large enough to test pagination and search performance, small enough to manage easily during dev.
    *   *Selection Criteria:* Ensure a mix of:
        *   10 Critical (Red Triage)
        *   30 Urgent (Yellow Triage)
        *   37 Stable (Green Triage)

### Phase 2: The "FHIR Bridge" (Transformation Logic)
We must map FHIR resources to MedFlow's schema.

| MedFlow Field | FHIR Source | Transformation Logic |
| :--- | :--- | :--- |
| **Basic Info** | `Patient` resource | Extract Name, DOB (calc Age), Gender. |
| **Chief Complaint** | `Encounter.reasonCode` | Map SNOMED code to text (e.g., "Chest Pain"). |
| **Vitals History** | `Observation` (Vital Signs) | Extract BP, HR, Temp, SpO2 over time. **Crucial for MedView trends.** |
| **Labs/Radiology** | `Observation` (Labs) | Convert to `Order` (Completed) + `Result`. |
| **Medications** | `MedicationRequest` | Map to `Active Medications`. |
| **Conditions** | `Condition` | Populate `Past Medical History`. |

### Phase 3: Seeding Script (`scripts/seed-synthea-77.ts`)
We will create a dedicated script to perform the seed.

```typescript
// Pseudo-code for the seeder
import { patients } from './synthea-data.json'; // The 77 selected files

async function seedDB() {
  const transformedPatients = patients.slice(0, 77).map(fhirPatient => {
    return transformFhirToMedFlow(fhirPatient);
  });

  // Batch write to Firestore (500 limit per batch, so 77 is fine in one go)
  await firestore.batch().set(transformedPatients).commit();
  console.log("‚úÖ Successfully seeded 77 patients!");
}
```

## 3. AI Testing Plan (The "Why")
With 77 rich patient records, we can verify:

### üß† Triage AI
*   **Test:** Run the Triage AI on all 77 patients.
*   **Expectation:** It should correctly identify the ~10 critical patients based on their vitals and complaints (derived from Synthea encounters).

### üìä MedView AI
*   **Test:** Open the dashboard for a patient with 5 years of history.
*   **Expectation:** MedView should correctly identify "New Medications" vs "Long-standing Meds" and spot trends in the Vitals History (which Synthea provides in detail).

### üîç Search & Performance
*   **Test:** Search for "Diabetes" or "Hypertension".
*   **Expectation:** Instant results filtering through the 77 records.

## 4. Execution Steps
1.  [ ] **Acquire Data:** Download Synthea sample.
2.  [ ] **Create Script:** `scripts/transform-fhir.ts` (The Bridge).
3.  [ ] **Run Seed:** Execute the script to push 77 docs to Firestore.
4.  [ ] **Verify:** Check Dashboard for 77 new cards.
